<%#= search_form_for @report.search, :url => url_for, :html => {:method => :get, :class => 'form-inline'} do |f| %>
    <%# @report.filters.each do |filter| %>
        <%# if filter.class.supported_types.include?(filter.type) %>
            <%# filter.comparators.each do |key, hint| %>
                <%# search_key = "#{filter.column}_#{key}" %>
                <%# if filter.date? %>
                    <%#= f.date_field search_key, :placeholder => hint %>
                <%# elsif filter.text? %>
                    <%#= f.text_field search_key, placeholder: hint %>
                <%# end %>
            <%# end %>
        <%# else %>
            <%#= render :partial => "query_report/custom_filters", locals: {f: f, filter: filter} %>
        <%# end %>
    <%# end %>

    <%#= f.submit 'Search', :class => 'btn' %>
<%# end %>

<br/>
<%#= link_to_download_report_pdf %>
<%#= link_to_download_report_csv %>
<br/>
<br/>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<div id='chart' style="margin-left:auto;margin-right:auto;width:600px;"></div>
<%#= render_chart(@report.chart.prepare, 'chart') if @report.chart %>

<br/>
<%# if @report.scopes.size > 0 %>
    <%#= link_to_with_scope('all', @report.current_scope) %>
    <%# @report.scopes.each do |scope| %>
        <%#= link_to_with_scope(scope, @report.current_scope) %>
    <%# end %>
<%# end %>
<br/>
<br/>

<% if @report.filtered_query.count > 0 %>
    <table class="table table-bordered table-striped">
      <thead>
      <% @report.columns.each do |column| %>
          <th><%= column.humanize %></th>
      <% end %>
      </thead>

      <tbody>
      <% @report.records.each do |record| %>
          <tr>
            <% @report.columns.each do |column| %>
                <td><%= record[column.name] %></td>
            <% end %>
          </tr>
      <% end %>
      </tbody>
    </table>
<% else %>
    <p>No record found</p>
<% end %>

<%#= paginate @report.query if @report.paginate? %>